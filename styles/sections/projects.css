/* styles/sections/projects.css */

/* --- CONTENEDOR PRINCIPAL --- */
.projects_main {
  margin-top: 20vh;
  margin-bottom: 20vh;
  padding: 0 20px;
  position: relative;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* --- WRAPPER STICKY --- */
.card_sticky_wrapper {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: sticky;
  top: 0;
}

/* --- TARJETA PRINCIPAL (ESTILO GLASS) --- */
.card {
  display: flex;
  flex-direction: column;
  position: relative;

  /* Dimensiones */
  height: 650px;
  width: 1400px;
  max-width: 95vw;

  border-radius: 32px;
  padding: 50px;
  transform-origin: top center;
  box-sizing: border-box;
  overflow: hidden;

  /* Efecto Vidrio */
  backdrop-filter: blur(40px);
  -webkit-backdrop-filter: blur(40px);
  border: 1px solid rgba(255, 255, 255, 0.6);

  /* Sombras */
  box-shadow:
    0 -10px 40px rgba(0, 0, 0, 0.08),
    0 30px 60px -10px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.9);

  will-change: transform;

  /* 2. Evita parpadeos en 3D y mejora bordes */
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;

  /* 3. Acelera el renderizado de la geometría */
  transform: translateZ(0);
}

.card_body {
  display: flex;
  height: 100%;
  width: 100%;
  gap: 60px;
}

/* --- COLUMNA IZQUIERDA (TEXTO) --- */
.card_text_column {
  width: 35%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.card_header_text {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.card_category_label {
  font-family: var(--inter);
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: rgba(0, 0, 0, 0.5);
  font-weight: 600;
}

.card_title_desktop {
  font-family: var(--apple-garamond), serif;
  font-size: 64px;
  line-height: 0.95;
  margin: 0;
  letter-spacing: -0.03em;
  color: #1a1a1a;
}

.card_description {
  font-family: var(--inter);

  /* Ajustado a 1.125rem (aprox 18px) para coincidir con Servicios */
  font-size: 1.125rem;
  line-height: 1.6;

  /* Usamos un gris un poco más sólido para legibilidad */
  color: #666;
  /* color: var(--text-secondary); <--- Si tienes la variable definida, mejor usa esta */

  margin-top: 30px;
}

.card_tags_container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.card_tag {
  font-size: 13px;
  padding: 8px 18px;
  background-color: rgba(255, 255, 255, 0.4);

  /* CAMBIO: Borde sutilmente azulado en vez de gris */
  border: 1px solid rgba(82, 113, 255, 0.15);

  border-radius: 100px;
  font-family: var(--inter);
  font-weight: 500;

  /* Texto con un leve tinte azul oscuro para armonía */
  color: #2a3b8f;

  transition: all 0.3s ease;
}

/* Efecto Hover en el Tag */
.card_tag:hover {
  background-color: rgba(82, 113, 255, 0.05);
  border-color: #5271ff;
  color: #5271ff;
  transform: translateY(-1px);
}

/* --- COLUMNA DERECHA (GALERÍA) --- */
.card_image_column {
  width: 65%;
  height: 100%;
  position: relative;
  border-radius: 24px;
  overflow: hidden;
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.03),
    0 10px 30px rgba(0, 0, 0, 0.05);
  background-color: rgba(255, 255, 255, 0.5);
}

/* --- ACORDEÓN --- */
.accordion_container {
  display: flex;
  width: 100%;
  height: 100%;
  gap: 15px;
}

.accordion_item {
  position: relative;
  height: 100%;
  border-radius: 18px;
  overflow: hidden;
  cursor: pointer;
  min-width: 60px;
  /* Fondo neutro por si tarda en cargar la imagen */
  background-color: #f5f5f7;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
}

/* --- IMAGEN CORREGIDA PARA SHOTS.SO --- */
.accordion_img {
  object-fit: cover;

  /* CAMBIO CLAVE 1: 'top' fija la imagen arriba. 
     El Navbar JAMÁS se cortará, si sobra imagen se cortará de abajo. */
  object-position: center top;

  width: 100%;
  height: 100%;
  transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* CAMBIO CLAVE 2: Reducimos el zoom */
.accordion_item.active .accordion_img {
  /* Antes era 1.05. Lo bajamos a 1.01 (casi imperceptible) 
     para que no "expulse" los bordes de la foto hacia afuera. */
  transform: scale(1.01);
}

.accordion_overlay_simple {
  position: absolute;
  inset: 0;
  background-color: #000;
  pointer-events: none;
}

/* --- RESPONSIVE --- */
@media (max-width: 1200px) {
  .card {
    width: 95vw;
    height: auto;
    min-height: 700px;
    padding: 30px;
  }

  .card_body {
    flex-direction: column-reverse;
    gap: 30px;
  }

  .card_text_column,
  .card_image_column {
    width: 100%;
  }

  .card_image_column {
    height: 400px;
  }

  .card_title_desktop {
    font-size: 42px;
  }
}

@media (max-width: 1024px) {
  .projects_main {
    padding: 0 15px;
    margin-top: 10vh; /* Menos margen arriba */
    margin-bottom: 10vh;
    gap: 40px; /* Espacio real entre tarjetas (Lista vertical) */
  }

  /* 1. ELIMINAR STICKY BEHAVIOR */
  .card_sticky_wrapper {
    height: auto !important; /* Ya no ocupa toda la pantalla */
    position: relative !important; /* Ya no es sticky */
    top: auto !important;
    display: block;
    margin-bottom: 40px; /* Margen entre cada proyecto */
  }

  /* 2. TARJETA NORMAL */
  .card {
    width: 100%;
    height: auto;
    min-height: auto; /* Dejar que el contenido defina el alto */
    padding: 25px;
    border-radius: 24px;

    /* Importante: Reseteamos transformaciones que puedan quedar */
    transform: none !important;
    top: 0 !important;
  }

  .card_body {
    flex-direction: column;
    gap: 25px;
  }

  .card_text_column {
    width: 100%;
  }

  .card_title_desktop {
    font-size: 32px;
    margin-bottom: 10px;
  }

  .card_description {
    font-size: 16px;
    margin-top: 15px;
  }

  .card_tags_container {
    margin-top: 20px;
  }

  /* GALERÍA / SLIDER */
  .card_image_column {
    width: 100%;
    height: 300px; /* Un poco más bajo en mobile para ver más contenido */
    border-radius: 16px;
    background: transparent;
    box-shadow: none;
    overflow: hidden;
    margin-top: 10px;
  }

  .accordion_container {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    padding-right: 20px;
    /* Ajuste para que el scroll sea suave en iOS */
    -webkit-overflow-scrolling: touch;
  }

  .accordion_item {
    min-width: 90%;
    scroll-snap-align: center;
    background-color: #f0f0f2;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
  }

  .accordion_img {
    object-fit: contain !important;
    object-position: center center !important;
  }
}
